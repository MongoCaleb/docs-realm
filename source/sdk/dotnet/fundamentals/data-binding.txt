.. _dotnet-data-binding:

=======================
Data Binding - .NET SDK
=======================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

In Xamarin and MAUI applications, data binding enables UI updates when an 
underlying object or collection changes, and vice versa.

Realm objects and collections are :ref:`live <dotnet-live-object>` and update 
automatically to reflect data changes. This is because 
Realm objects implement 
`INotifyPropertyChanged <https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.inotifypropertychanged>`__ 
and Realm collections implement 
`INotifyCollectionChanged <https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.inotifycollectionchanged>`__. 
When you bind live collections and objects to your UI, both the UI and live 
objects and collections update at the same time.

.. important:: Don't Use ToList()

   Because Realm collections are live, you should not call ``ToList()``. Doing so 
   forces loading the collection from memory, so the resulting collection is 
   no longer a live object.

Data Binding a Realm Collection
-------------------------------
In the following code example, we create a public ``IEnumerable`` of 
Realm objects called "Items" and then populate that collection with all 
of the documents in the Items collection:

.. code-block:: csharp
   :copyable: false

   ... 
   
   public IEnumerable<Item> Items { get; }
   
   ... 
   
   _itemsRealm = Realm.GetInstance(config);
   Items = _itemsRealm.All<Item>();

In the associated XAML file, we bind a ``ListView`` to the **Items** ``IEnumerable`` 
and then use the Item's property values to display information in the ListView:

.. code-block:: xml
   :copyable: false
   :emphasize-lines: 1,11,13,14,17,20

    <ListView x:Name="listItems" ItemsSource="{Binding Items}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <ViewCell>
                    <Grid Padding="10,0,15,0" BackgroundColor="#ceF">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="4*"/>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>
                        <Label Text="{Binding Summary}"/>
                        <Switch x:Name="chkCompleted" 
                           IsToggled="{Binding IsComplete}"/>
                        <StackLayout Grid.Column="2" VerticalOptions="Center">
                            <Image WidthRequest="30" x:Name="btnDelete" 
                                    Source="trash.png">
                                <Image.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="Delete_Clicked" 
                                        CommandParameter="{Binding .}"/>
                                </Image.GestureRecognizers>
                            </Image>
                        </StackLayout>
                    </Grid>
                </ViewCell>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
